---
layout: post
title: How can Virtual Router live in the Cloud?
description: "How can Virtual Router live in the Cloud?"
tags: [NFV]
categories: [NFV]
---

###    摘要
IT耗资在前所未有的剧增。企业和运营商在使用云计算技术来降低成本的同时自然而然的想到使用低成本的x86服务器作为硬件，在这之上使用虚拟的路由器网元来节省成本，来代替路由器厂商的高价路由器。  本文利用OpenStack技术进行物理资源的抽象，提供云资源环境，将NFV的路由器网元部署在OpenStack云资源环境中，将网元之间进行拓扑连接组网。在云环境中实现NFV路由器网元的路由与交换功能。用户能够通过统一的界面访问这些NFV的虚拟路由器网元，进而对网元拓扑进行功能和性能的测试。  

###    目标与内容

目前大多数的教育机构的实验室实体设备都存在灵活性低的问题。虚拟实验室一方面不断在专用硬件设备、基础设施上加大投资，另一方面学生在实验拓扑变得越来越复杂，占用的物理设备的数量增加。这就是所谓的“剪刀差”。当设备类型越丰富、数量越多、拓扑越多样的时候，用户能够享受的教学规模也越大。但由于资金、场地等各方面的因素限制，实体实验室能够提供的设备数量有限，设备的类型也单一，一般都是指定某个厂商、固定的设备配置等。可支持学生进行网络实验的网络拓扑也无法多样化。基本上大中型实验项目无法拓展，因此也导致用户无法将自身所学的专业技能发挥到实际项目中，网络规划与设计综合技能有待提高。  在物理的实验室中，用户同时进行实验可能需要数百台物理的交换机或者路由器，如果仅靠使用物理设备进行实验去完成这一系列的路由交换的实验将耗费大量的工作时间。这就是使用虚拟的路由器网元进行实验的优势。  物理的实验室变成基于x86的NFV虚拟网元组成的实验室平台，那么在基础设施服务层面需要有个云计算平台给NFV的虚拟网元进行孵化并组网。由于物理实验室要进行虚拟实验室的转型。那么在虚拟实验室的搭建过程中需要对OpenStack的和规划和部署充分了解。需要充分利用实验室中的物理机资源。由OpenStack进行物理层的抽象，提供一个云资源环境，而NFV的路由器网元部署在OpenStack云资源环境中，最后让做实验的师生们能够访问该NFV的虚拟路由器网元。而且需要提供Web界面给师生们使用，在使用的时候需要对资源有占用时间的规划，如一节课（45分钟）时间，时间结束后需要将占用的资源释放等需求。[1]在网络测试的课程中，由于使用厂商专有的测试设备价格昂贵，而且端口数量有限。需要使用虚拟化的测试网元来代替昂贵的物理的测试端口

###    项目需求
仿真软件不能进行“网络测试分析”实验课，也不方便实验室的统一管理，因此需要引进NFV虚拟网元；实验室网线部署和设备的部署增加了运维；物理设备价格昂贵且容易宕机需要部署虚拟环境云计算OpenStack平台；云计算平台与NFV虚拟网元的结合才能搭建完整的虚拟实验平台提供给师生使用。NFV虚拟网元之间需要有虚拟化支持和网络连通性，才能进行组网完成网络相关实验。使用NFV虚拟的测试网元对整个环境进行测试，保证虚拟实验平台的可用。  
而且由于物理设备的有限。学生做实验的时候通常需要分批来进行，要是需要某一台物理的设备宕机了，可能就导致实验进行不下去。因此在物理设备上做实验的问题更加容易出现。一旦物理设备的宕机，如果采购不及时，那么便会长时间影响做实验的效率和课程的进度。  如果学生使用仿真软件进行试验的话，如使用Cisco的VIRL或者使用GNS3等仿真的话，学生均在自己笔记本上进行操作，造成了任务的管理的不方便，而且Cisco的VIRL或GNS3不能进行扩展，只能对软件内包含的特定虚拟镜像进行操作，扩展性不强，而且没有测试的端口包含，不能进行“网络测试分析”的实验课。  物理设备价格昂贵，对于网络工程专业来说，在“路由与交换”、“网络性能测试”的课程中需要用到的路由器和测试设备的价格都很昂贵，一般的实验室只能少批量的采购，由此学生在进行实验课的预习等均会受到物理条件的制约，影响了学生的学习效率。  由此需要将物理的实验室变成基于x86的NFV虚拟网元组成的实验室平台，那么在基础设施服务层面需要有个云计算平台给NFV的虚拟网元进行孵化并组网。而且需要提供Web界面给师生们使用，在使用的时候需要对资源有占用时间的规划，如一节课（45分钟）时间，时间结束后需要将占用的资源释放等需求。由此需要进行云计算平台OpenStack的搭建。  由此综上所述，本章针对虚拟环境管理的需求有以下几点：  1）物理实验室需要转型为虚拟实验室；  2）选择合适的NFV虚拟网元；  3）OpenStack需要对NFV虚拟网元的虚拟化支持；  4）OpenStack需要对NFV虚拟网元的网络连通性支持；  5）需要整个虚拟实验室进行功能性能测试  
![curl](/images/nfv_in_openstack/1.png)
![curl](/images/nfv_in_openstack/2.png)
![curl](/images/nfv_in_openstack/3.png)
![curl](/images/nfv_in_openstack/4.png)
![curl](/images/nfv_in_openstack/5.png)
![curl](/images/nfv_in_openstack/6.png)
